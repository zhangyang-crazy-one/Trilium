---
alwaysApply: true
description: "文档同步规则 - 每次会话必须加载"
---

# 文档同步规则

> 加载时机：Stop（会话结束时检查）
> 适用范围：所有影响架构、API 或用户行为的代码更改

---

## 文档同步

<documentation_sync>
当代码更改影响架构、API 或用户行为时，**必须**更新相关文档。

### 同步触发条件（强制 MUST）

以下情况**必须**进行文档同步：

| 更改类型 | 需要更新的文档 |
|----------|----------------|
| 添加新 API 端点或修改现有端点 | `docs/API.md`，相关 README 章节 |
| 更改组件 props 或接口 | 组件文档，类型定义文件 |
| 修改数据库模式或数据模型 | 数据库文档，类型定义 |
| 添加新功能或移除现有功能 | 功能文档，用户指南 |
| 更改配置选项或环境变量 | `README.md` 设置章节，`.env.template` |
| 修改项目结构或架构 | `docs/ARCHITECTURE.md`，系统图 |

### 文档更新映射表

| 更改类型 | 需要更新的文档 |
|----------|----------------|
| API 更改 | `docs/API.md`，相关 README 章节 |
| 架构更改 | `docs/ARCHITECTURE.md`，系统图 |
| 新功能 | 功能文档，用户指南 |
| 配置更改 | `README.md` 设置章节，`.env.template` |
| 模式更改 | 数据库文档，类型定义 |

### 同步验证

完成触发文档同步的任务之前：

1. **识别**所有受影响的文档文件
2. **更新**每个文件以反映更改
3. **验证**文档与代码的准确性

### 文档更新检查清单

```
□ 识别了所有受影响的文档
□ API 文档与实际接口一致
□ 架构图反映当前系统结构
□ README 中的设置说明正确
□ .env.template 包含所有新环境变量
□ 类型定义与实际数据模型匹配
```

### 文档质量标准

| 标准 | 要求 |
|------|------|
| 准确性 | 文档必须与代码实现一致 |
| 完整性 | 覆盖所有公开的 API 和功能 |
| 及时性 | 与代码更改同步更新 |
| 可读性 | 清晰、易于理解 |

### 常见遗漏

注意以下容易遗漏的文档更新：

- 环境变量说明（添加新变量时）
- 依赖版本要求（更新依赖时）
- 迁移指南（Breaking changes 时）
- API 响应格式变化
- 错误码和错误消息变化
</documentation_sync>
